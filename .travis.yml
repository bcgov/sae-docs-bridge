os: linux
dist: trusty
sudo: required
language: node_js
services:
- docker
jobs:
  include:
  - name: SAE Docs Bridge API
    stage: APIs
    language: node_js
    node_js: lts/*
    cache: npm
    before_install:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      npm ci
      if [ "$TRAVIS_TAG" = "" ]; then npm audit --production; fi
    before_script:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      cp config/default.json.template config/default.json
    script:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      npm test
    before_deploy:
    - cd /home/travis/build/bcgov/sae-docs-bridge
    deploy:
      provider: script
      script: bash docker_push sae_docs_bridge || travis_terminate 1
      on:
        all_branches: true
        condition: "$TRAVIS_BRANCH =~ ^master|develop$ || -n $TRAVIS_TAG"
env:
  global:
  - HELM_TGZ=helm-v2.4.1-linux-amd64.tar.gz
  - HELM_URL=https://storage.googleapis.com/kubernetes-helm
  - secure: "gCWNL++SRmuGg6KpCLrwkN7u51xXN+XWYNDEI0EoiUspYVxbWWZVjBpofrE9pKAH0yNQm+grDitCIEGqaglpBy4fCwiyzxBXmADgzjQrPN4918JUUDNKIpT0k1WuTsof4b4Xi8SAvZe1cvcgrA0D5amoRKiq78IrqwDxPQfBCZk+QbOkq14MeEpjT4rcI261B5uSHGvRhtFzK88+m/VcVKDKy3aHS8NTXRlu0LX2+IpBfFZIyIRJjwzRaa0DbXUIlrQ9ERIyWcPptn+kWiOWtgp04zEB99jJBx5mJcxee6+VtM00IGvi7n3A3zlYWP6U0B19ocFhGRhJQfU8xYebqWJxZeewa6KPf4Dx6YuX+VqdK7AzYlyIagrlEnqRqMMz9zNyG/eVk2Zs26JWHailOSVAAUYrGMx1xHbaPV5pl5tIB8ZArZum4YavphIzXuDj4NFup3UP3tnoW6kZfPky/tm/JYfRSIqKjuCRd+w0mlb7AtYbNO4DgM38DOhp71mcqG2XovaUVmTy9bF0osTrMFVzOci4JhDO4ldf+caKH1YrCRfOW1ZZ78cG7B6mw5+TbQqnW62YC3KDeMDwHB9t5UawK7f2rmLMdNs+Kn2CGxWw5pxHD1fMJArg9Xw89hg3kb9X4Okf+t4yUfjxdlB7QPtQ1wJJ5XCtaBqViuBJrTc="
  - secure: "MP1IaS+GF2UuOF+vjL5CO8vLc/oMdB828vsTwajIGSWrvEnRRpZ4ew20cgb3HdCl24l80WK4yVA48crqUG0PzvgnrOLCaPccBh1c6bDw1pKbnI0h+ET8VSN7VGvqUcqxCZbFbxy8+eGpn40BoAfCIeOMvkhCBcYcS7oanFF73rH2ussast70QkaMXGYDKRLM5/jNiedMSrb7H8Kaeon3gKLVgke0Vi8vjy9bEk0nsYEpJ20C/67H4vOZgVHzE2Hrdx3YQ+jF59OOm/DGr2WoILK6MhmA0Ct8kjANsa0WwBnfs2c7hvMdIv18ZnhTJAROOsnIxLhsO3nSJB195sok9UEd3UcKUyKHYTh0SvHwrdR8tNNY3gMFkeDQR1UHxmIwAHIQpw8w4b90NxASgrBANYaiEgi4G8AZvLCW5kwv7sI5Y6YS9H6wdVlkEB7TEbnAwYCFS31ZCClMIfD5RP58+tJox4orTKzYadlhTEq7mE+fVVsTBSFffR5m1EkHyT7fnEsB/AV6/E/6JgmjOltzHJsywHT9L8WfsKfZfMhhYMmORTwqSTLRn9qy4/y8E3UK4fNv6ZRk69oQvIuB9v7MnerlRegrBmYxxSftx/TgDwFUq6ubkhSxSKIFH+BpSI+hu9evwikf0n56K9xjuWxC2AdzyU0MTutMbpWVMMheAD8="
  - secure: "qi8l3RtcBh6HqORmvRO6BtKl4y1IiP4R5Hd87YG6Ck2JQcbieQlRbB+PFY+4PfHYRbRRhCyta9s1oFVuAGKmorCGiXdJB+fnTeU/at+MbsRLu75+OjuTJq6zsHnxnStNcCzKqv0TMh6h++u2kM/I6EWA+oaLvFVnfFOsMX52FddbKTmaZMnZJDE7PjtvQL32mqsLjqVwVNG+tMuwBFdrieuRjG7Swzs6Ao1Isi2IZHxllFPHocj2k47munNVWDVCENYuXVo33Pes2D8DLWnDaO565nPYo1GFGsauhTq9/z0se7gULQIb9HIx+zcXj5Ri6seHfMnrj0UmVI16tULLf7l6oPAm0F+VHab2ofPnYL96+Ha1Jv6FK1yysQB8Tmc/rE4H8b9DAGb2tV+RntVrmXARlVJk5AcYeJ27+jlqY3NMHbVCuuTy9VoDl4njYo4KDU1wBOB9dUX1TzyzHgsK5MRHFUgHBvVDzQap2dAQddIOHGa2lgTSj64rBzRofoDk/YPIevaftSSjDmuCFoq0nuzg+dOyi9FuGCnmcun2VxTydINLMSnrb3ZqHl4q0SB7nWTikGRbzwNSix9fLpzIpuyCKI3H4IYhpUoNCHFLHxJ5qdg//AgvTRXf82uSqa8C1iALcZZxpzAcjcnZ4mmWvtE/Nrf1CnTa00ZTW8z3sCM="
  - secure: "h850Dl0ojrPNhdQQQKV7F9uB7KiBWfY52dKW8Wxgg6IqexqNCkP94vIuW0VNEJwaE0GaxjAbNH6TqHZfqZlx0bpOLjTpm640YhyLracqvAIxuMpWQQJTo+snxEVMyua4ZT/ooNoqiOEKhx5dHadGKKZ2SHGDb+LPBL7wRr7wju+EwlRfQtIyE26VW30Ftlzhc6VBsxmRtzkjmS9Nql3ZGCjuxU3GH1f1kHItMKT/2dh0Ca32wL9mUvFZARwavTahGvN6Bmmog1ml9LYjWlFqdKBFfMcLWE6aTUHfB6F+wepnIOHVNBeSglDx0TiSbM3LsVhkgpOemqvQupwfgmpDne0TJUUXTdnPZEAnh2smZQeJRP3Y+fZFDfxubhJN7f+oSYFlXIvZAZ7xe2LJyEIh0XgZcq+LxF0TjeZiUL5u9yl8ltOMWro8ohwDhgFbrWg7XFySkAa9wsBXbNyYQRccvHPPl92Bj1BEWEdxEyZQPjfjhz1gy/V2jG4pvwaeryAlapJNBH4set91H7zrNVfccHqhQZg9Mv/uCN87OagblAHYrZKKfTKsO2EKlFe01UOw+utmuoRiYakdKQmO5l8WsYl2OzbraBeegVI17kXbJbvCQSwo37rpPfvJDqsT/U1JYxp+UGuKB5S7tyRNtv3gMEpqOlIWCN/TUbOpGBvu+dA="



