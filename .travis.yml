os: linux
dist: trusty
sudo: required
language: node_js
services:
- docker
jobs:
  include:
  - name: SAE Docs Bridge API
    stage: APIs
    language: node_js
    node_js: lts/*
    cache: npm
    before_install:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      npm ci
      if [ "$TRAVIS_TAG" = "" ]; then npm audit --production; fi
    before_script:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      cp config/default.json.template config/default.json
    script:
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      npm test
    - |-
      cd /home/travis/build/bcgov/sae-docs-bridge
      bash docker_quayio_push sae-docs-bridge
    before_deploy:
    - cd /home/travis/build/bcgov/sae-docs-bridge
    deploy:
      provider: script
      script: echo "nothing"
      on:
        all_branches: true
        condition: "$TRAVIS_BRANCH =~ ^master|develop$ || -n $TRAVIS_TAG"
env:
  global:
  - secure: "HCh3SuNzLVsJ4d6/R2ildDsnDnNeaBgXuF7+6tUcmQ5jlElIpuXpBq6xeXDyxfOMOHb/2YTrqRnlPsoosoA7J2t9Z+qh2OAXtfXd1kBYlsI5/F3M6hDBM749KQqDcDAnGgHTliYSU8fKydQBf07DAE4e6upowrDuiXkCuuLRrZx24RfONhfywLhY10rVtADlOmQgeA2aitGGKJsqUtLDhZXpD7xcq9Kkd7ESI9TcnXI7hkmt0abo1woFu3qTEe9P5qssT28BpdFtLKXPSWsPq3pKe3mzcoDoM6DyP4S53qVHySG9WDP0zeJ3vqo40JFaMABalQFZ60S31CB4uL4AiZ4DI36RNymwDxauFxwjvUC5jRby+9oSGuXBRosAmQo2Wuh6LNTVKlEekpcu+koVUzbQcW6ZTCQNKpOMJbjLBb6ZvHK4ktgqfcbcOjjCO5hp9BB68omCFwanwEkvY+0YXnYdtGhgGQo6Lp3Bp9eoye5aboxlp3p61aGkjR8DFVW2c0EEigMZC0sK/rEGpmVsFKw1RyLEnQc3yCj6hzI5JGhnftLzIDjPuK2PTxCuiJXJk2RM58zBE0ztKG3T3An1htwsk1KI/tK90yDx9tNw2uoQ4YnamAbAn+vhmLgzLlo1cJlslwmln2vMewTRWjrzmFaIvDxvPZMkXo0aV0QP8NE="
  - secure: "q/sAthN6L8Q+LuOdSNdd9HrzXTpV7HXaFBCVm6YnCtPrcLupIfnqTTUXrQf0W9jDdpGtWb1h2dZH34/uOMDBUX9JEl5fdEii3UnFCOeeoHI5SmcLSIVPl/f2tk5rfby8BsNNI3zB23m8J9H32ya5w9rnoqPzgwzybHegDlM1dKXhx1+IYykSyz7v5h4evvI8k0Dk2tPLngj/wN5Nzd8Sfq3CglxbXVZFjWMBlgCltOup18X3Gf5PCtAAdilRvvz5TcINTA9py7mqOo0Bho7pgpcUEL0hULDjWV8ikcO3Fvi39bPAEc1AHbRRzVEyoFHbPTUTos6xgl4TlmAW02ZH/lqpKxzz1noxCxmDeBThHsDGp+qAcuk9EGDAP8ZOXBfec22CFgffD0fmjIZKej2PzVs1EjQYUwv8/L8NtHqBXq00hwZ423C3KgCqJBw9Z1ptSGMIKS9wJwCX3ub/2zUX1WcV5DZnmMUouEj1FM5gALuP6PCF6gaMIzpUF/9R3jcP79nADfVnmyjXJZQ955kotipwza8g4p7BE5apwfaEF2UGadXGch2JvhF/jG4zbrBwoqfIJKVTPrXQJ88KRzaV2DNRRKmPXbhKtsnbqiUsNq+LmLliMHDFqcwwYkwipeslJwum9eRlKXwcBjqv74I/5+XkQfgY7IxjHIgIVxjhVg0="
